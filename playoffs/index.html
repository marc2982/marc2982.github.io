<html lang="en">
<head>
    <title>Bryan Family Playoff Pools</title>
    <link href="css/index.css" rel="stylesheet" />
    <link href="css/teams.css" rel="stylesheet" />
    <link href="css/tables.css" rel="stylesheet" />

    <script src="js/yearlyResults.js" type="module"></script>
    <script src="js/winsLosses.js" type="module"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
    <link href="https://cdn.datatables.net/2.0.8/css/dataTables.dataTables.css" rel="stylesheet" />

    <script type="module">
        import { yearlyResults } from './js/yearlyResults.js';
        import { winsLosses } from './js/winsLosses.js';

        window.onload = async function() {
            let yearlyResultsTable = $('#yearlyResults');
            let winsLossesTable = $('#winsLosses');

            await yearlyResults(yearlyResultsTable);
            await winsLosses(winsLossesTable);
        }
    </script>
</head>
<body>
	<div id="container">
		<h1 id="pageHeader">Bryan Family Playoff Pools</h1>
		
		<!-- Tab Navigation -->
		<div class="tab-nav">
			<button class="tab-button active" data-tab="results">Results</button>
			<button class="tab-button" data-tab="performance">Performance</button>
			<button class="tab-button" data-tab="picks">Pick Analysis</button>
			<button class="tab-button" data-tab="teams">Team Analysis</button>
			<button class="tab-button" data-tab="h2h">Head-to-Head</button>
		</div>

		<!-- Tab Content -->
		<div id="results" class="tab-content active">
			<div class="section-card">
				<h2>Yearly Results</h2>
				<table id="yearlyResults" class="stripe"></table>
			</div>
		</div>

		<div id="performance" class="tab-content">
			<!-- Performance stats will be dynamically inserted here -->
		</div>

		<div id="picks" class="tab-content">
			<!-- Pick analysis will be dynamically inserted here -->
		</div>

		<div id="teams" class="tab-content">
			<!-- Team analysis will be dynamically inserted here -->
		</div>

		<div id="h2h" class="tab-content">
			<!-- Head-to-Head stats will be dynamically inserted here -->
		</div>
	</div>

	<script type="module">
		import { yearlyResults } from './js/yearlyResults.js';
		import { performanceStats } from './js/performanceStats.js';
		import { pickAnalysis } from './js/pickAnalysis.js';
		import { teamAnalysis } from './js/teamAnalysis.js';
		import { headToHead } from './js/headToHead.js';

		window.onload = async function() {
			// Load data
			await yearlyResults($('#yearlyResults'));
			await performanceStats($('#performance'));
			await pickAnalysis($('#picks'));
			await teamAnalysis($('#teams'));
			await headToHead($('#h2h'));

			// Tab switching
			$('.tab-button').on('click', function() {
				const tabName = $(this).data('tab');
				
				// Update active tab button
				$('.tab-button').removeClass('active');
				$(this).addClass('active');
				
				// Update active tab content
				$('.tab-content').removeClass('active');
				$('#' + tabName).addClass('active');
			});
		}
	</script>
</body>
</html>
